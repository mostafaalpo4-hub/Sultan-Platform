<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Sultan platform v 2.1</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>

<html lang="ar" dir="rtl">

<head>

    <meta charset="UTF-8">

    <title>Sultan Mega Platform v2.5 | Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø³Ù„Ø·Ø§Ù†</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>

        :root { 

            --primary: #ffd700; --neon: #00f3ff; --bg: #050505; 

            --card: #111; --border: #222; --gold: #ffd700;

            --danger: #ff4444; --success: #39ff14; --purple: #bc13fe;

        }

        * { box-sizing: border-box; transition: 0.3s; scroll-behavior: smooth; }

        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; direction: rtl; overflow-x: hidden; }

        /* --- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ®Ù…Ø© --- */

        .auth-overlay { 

            position: fixed; inset: 0; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); 

            z-index: 2000; display: flex; justify-content: center; align-items: center; 

        }

        .auth-card { 

            background: rgba(15, 15, 15, 0.95); padding: 40px; border-radius: 35px; border: 1px solid var(--primary);

            width: 100%; max-width: 450px; text-align: center; position: relative;

            box-shadow: 0 0 60px rgba(255, 215, 0, 0.15); backdrop-filter: blur(15px);

        }

        input, select, textarea { 

            width: 100%; background: #000; border: 1px solid #333; color: white; 

            padding: 15px; border-radius: 14px; margin-bottom: 15px; font-family: 'Cairo';

        }

        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }

        .sultan-btn { 

            background: var(--primary); color: black; width: 100%; padding: 18px; 

            border: none; border-radius: 14px; font-weight: 900; cursor: pointer; font-size: 16px;

            display: flex; align-items: center; justify-content: center; gap: 10px;

        }

        .sultan-btn:hover { transform: scale(1.02); filter: brightness(1.1); }

        /* --- Sidebar Ø§Ù„Ù…Ø·ÙˆØ± --- */

        .sidebar { 

            position: fixed; top: 0; right: -320px; width: 320px; height: 100%; 

            background: #0a0a0a; border-left: 2px solid var(--primary); 

            padding: 80px 15px 20px; display: flex; flex-direction: column; gap: 8px; z-index: 1001;

            overflow-y: auto;

        }

        .sidebar.active { right: 0; }

        .nav-btn { 

            background: #111; border: 1px solid #222; color: #888; padding: 12px 15px;

            border-radius: 12px; cursor: pointer; text-align: right; display: flex; align-items: center; gap: 12px;

            font-size: 14px;

        }

        .nav-btn.active { background: linear-gradient(90deg, rgba(255,215,0,0.2), transparent); color: var(--primary); border-color: var(--primary); }

        .nav-btn i { width: 20px; text-align: center; }

        /* --- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© --- */

        .content-section { height: 100vh; overflow-y: auto; padding: 100px 20px 150px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; }

        

        /* ÙƒØ±ÙˆØª Ø§Ù„Ø£Ù†Ù…ÙŠ */

        .anime-card { 

            background: #111; border-radius: 20px; overflow: hidden; border: 1px solid #222; 

            position: relative; cursor: pointer; transition: 0.4s;

        }

        .anime-card:hover { transform: translateY(-10px); border-color: var(--gold); }

        .anime-card img { width: 100%; height: 280px; object-fit: cover; }

        .anime-card .info { padding: 12px; text-align: center; font-weight: bold; }

        .badge-views { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); color: var(--gold); padding: 4px 10px; border-radius: 8px; font-size: 11px; }

        /* --- Ø§Ù„Ø´Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ± --- */

        .chat-container { height: 60vh; background: #080808; border-radius: 25px; padding: 25px; overflow-y: auto; border: 1px solid #222; display: flex; flex-direction: column; gap: 15px; }

        .msg { padding: 14px 20px; border-radius: 20px; max-width: 75%; font-size: 14px; line-height: 1.6; }

        .me { background: var(--primary); color: black; align-self: flex-start; border-bottom-right-radius: 2px; }

        .them { background: #222; color: white; align-self: flex-end; border-bottom-left-radius: 2px; }

        /* --- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† --- */

        .stat-card { background: #111; border: 1px solid #222; padding: 20px; border-radius: 20px; text-align: center; }

        .stat-card h2 { color: var(--primary); font-size: 30px; margin: 10px 0; }

        

        .leader-item { display: flex; align-items: center; gap: 15px; background: #151515; padding: 15px; border-radius: 15px; margin-bottom: 10px; border: 1px solid #222; }

        .leader-rank { width: 40px; height: 40px; background: var(--gold); color: black; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-weight: 900; }

        /* --- Ø§Ù„Ø£Ø¯ÙˆØ§Øª --- */

        .tool-card { background: #111; padding: 25px; border-radius: 25px; border: 1px solid #222; margin-bottom: 25px; position: relative; }

        .copy-btn { position: absolute; top: 20px; left: 20px; background: var(--success); color: black; border: none; padding: 5px 12px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: bold; }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† --- */

        .creator-lab { border: 2px dashed var(--purple); padding: 25px; border-radius: 25px; background: rgba(188, 19, 254, 0.05); }

        .hidden { display: none !important; }

        .points-pill { background: linear-gradient(45deg, #ffd700, #ffae00); color: black; padding: 8px 25px; border-radius: 50px; font-weight: 900; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }

    </style>

</head>

<body>

    <div class="sidebar" id="sidebar">

        <div style="text-align:center; margin-bottom:30px;">

            <div class="points-pill">ğŸª™ <span id="userPoints">0</span></div>

            <p id="sultanName" style="margin-top:15px; color:var(--primary); font-weight:900; font-size:18px;"></p>

        </div>

        

        <button class="nav-btn active" onclick="switchTab('otaku')"><i class="fas fa-film"></i> Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø£Ù†Ù…ÙŠ</button>

        <button class="nav-btn" onclick="switchTab('tasks')"><i class="fas fa-tasks"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</button>

        <button class="nav-btn" onclick="switchTab('store')"><i class="fas fa-shopping-cart"></i> Ù…ØªØ¬Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</button>

        <button class="nav-btn" onclick="switchTab('ranking')"><i class="fas fa-medal"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</button>

        <button class="nav-btn" onclick="switchTab('docs')"><i class="fas fa-code"></i> Ø§Ù„Ù…ÙÙƒØ±Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©</button>

        <button class="nav-btn" onclick="switchTab('creator')"><i class="fas fa-lightbulb"></i> Ù…Ø®ØªØ¨Ø± Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†</button>

        <button class="nav-btn" onclick="switchTab('security')"><i class="fas fa-shield-alt"></i> Ù…Ø§Ø³Ø­ Ø§Ù„Ø£Ù…Ø§Ù†</button>

        <button class="nav-btn" onclick="switchTab('extra')"><i class="fas fa-tools"></i> Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Øª</button>

        <button class="nav-btn" onclick="switchTab('private')"><i class="fas fa-comments"></i> Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</button>

        <button class="nav-btn" id="adminBtn" onclick="switchTab('admin')" style="color:var(--danger); border-color:var(--danger); display:none;"><i class="fas fa-user-shield"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>

        

        <button onclick="logout()" style="margin-top:20px; background:none; border:1px solid #444; color:#888; padding:12px; border-radius:12px; cursor:pointer;">Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</button>

    </div>

    <div style="position:fixed; top:25px; right:25px; z-index:1002; cursor:pointer;" onclick="toggleSidebar()">

        <div style="background:rgba(20,20,20,0.9); border:1px solid var(--primary); padding:12px; border-radius:15px; backdrop-filter:blur(5px);">

            <i class="fas fa-th-large" style="color:var(--primary); font-size:22px;"></i>

        </div>

    </div>

    <div id="login-screen" class="auth-overlay">

        <div class="auth-card">

            <h1 style="margin:0;">Ø³Ù„Ø·Ø§Ù† Ø¯ÙŠÙ</h1>

            <p style="color:#666; margin-bottom:30px;">Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© v2.5</p>

            

            <div id="register-fields" class="hidden">

                <input type="text" id="regName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">

                <input type="text" id="refBy" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

            </div>

            

            <input type="email" id="userEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">

            <input type="password" id="userPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

            

            <button class="sultan-btn" onclick="handleAuth()" id="auth-btn">

                <i class="fas fa-door-open"></i> <span id="btnText">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>

            </button>

            

            <div style="margin:20px 0; color:#444; font-size:12px;">Ø£Ùˆ Ø¹Ø¨Ø± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©</div>

            

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">

                <button onclick="loginWithGoogle()" style="background:white; color:black; border:none; border-radius:12px; padding:12px; font-weight:bold; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:8px;">

                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18"> Ø¬ÙˆØ¬Ù„

                </button>

                <div id="tg-login">

                    <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="SultanDev_robot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>

                </div>

            </div>

            <p onclick="toggleAuth()" id="toggle-text" style="margin-top:25px; color:var(--neon); cursor:pointer; font-size:13px; font-weight:bold;">Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ùƒ</p>

        </div>

    </div>

    <div id="mainApp" class="hidden">

        

        <div id="otakuAreaWrap" class="content-section">

            <div style="text-align:center; margin-bottom:50px;">

                <h2 style="font-size:45px; color:var(--gold); margin:0; text-shadow: 0 0 20px rgba(255,215,0,0.3);">Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø³Ù„Ø·Ø§Ù† â˜ ï¸</h2>

                <p style="color:#888;">Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ù†Ù…ÙŠ ÙˆØ§Ù„Ø³ÙŠÙ†Ù…Ø§ Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙƒ</p>

            </div>

            <div id="animeContainer">

                <h3 style="border-right:5px solid var(--primary); padding-right:15px; margin-bottom:30px; font-size:24px;">ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</h3>

                <div class="grid" id="animeGrid"></div>

                <div id="allFolders" style="margin-top:60px;"></div>

            </div>

        </div>

        <div id="tasksAreaWrap" class="content-section hidden">

            <h2 style="color:var(--primary); margin-bottom:30px;"><i class="fas fa-coins"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ø§Ø±Ø¨Ø§Ø­</h2>

            <div class="tool-card" style="display:flex; justify-content:space-between; align-items:center;">

                <div>

                    <h4 style="margin:0; font-size:18px;">ğŸ”— Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h4>

                    <p style="color:#777; margin:5px 0 0;">ØªØ®Ø·Ù‰ ÙˆØ§ÙƒØ³Ø¨ 15 Ù†Ù‚Ø·Ø© ÙÙˆØ±ÙŠØ©</p>

                </div>

                <button class="sultan-btn" style="width:120px;" onclick="doTask('https://slow-mud.com/0HwJ3C', 15)">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©</button>

            </div>

            <div id="extraTasks"></div>

        </div>

        <div id="rankingAreaWrap" class="content-section hidden">

            <h2 style="color:var(--primary); text-align:center; margin-bottom:40px;">ğŸ† Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</h2>

            <div id="leaderboardList" style="max-width:800px; margin:auto;"></div>

        </div>

        <div id="storeAreaWrap" class="content-section hidden">

            <h2 style="color:var(--purple); margin-bottom:30px;"><i class="fas fa-shopping-bag"></i> Ù…ØªØ¬Ø± Ø³Ù„Ø·Ø§Ù† Ù„Ù„Ø¥Ø¶Ø§ÙØ§Øª</h2>

            <div class="grid">

                <div class="stat-card">

                    <i class="fas fa-check-circle" style="font-size:40px; color:var(--neon);"></i>

                    <h3>Ø´Ø§Ø±Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚</h3>

                    <p>Ø£Ø¸Ù‡Ø± ÙƒØ¹Ø¶Ùˆ Ù…ÙˆØ«Ù‚ ÙÙŠ Ø§Ù„Ø´Ø§Øª</p>

                    <button class="sultan-btn" style="background:var(--neon);">Ø´Ø±Ø§Ø¡ (500 Ù†Ù‚Ø·Ø©)</button>

                </div>

                <div class="stat-card">

                    <i class="fas fa-palette" style="font-size:40px; color:var(--primary);"></i>

                    <h3>Ø«ÙŠÙ… Ø°Ù‡Ø¨ÙŠ Ø®Ø§Øµ</h3>

                    <p>ØªØºÙŠÙŠØ± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</p>

                    <button class="sultan-btn">Ø´Ø±Ø§Ø¡ (1000 Ù†Ù‚Ø·Ø©)</button>

                </div>

            </div>

        </div>

        <div id="creatorAreaWrap" class="content-section hidden">

            <div class="creator-lab">

                <h2 style="color:var(--purple);"><i class="fas fa-flask"></i> ØµÙ†Ø¯ÙˆÙ‚ Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†</h2>

                <p>Ø³Ø§Ù‡Ù… ÙÙŠ ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ÙˆØ£Ø±Ø³Ù„ Ø§Ù‚ØªØ±Ø§Ø­Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø³Ù„Ø·Ø§Ù†.</p>

                <textarea id="ideaInput" rows="5" placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±ØªÙƒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ù‡Ù†Ø§..."></textarea>

                <button class="sultan-btn" style="background:var(--purple); color:white;" onclick="sendIdea()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙƒØ±Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>

            </div>

        </div>

        <div id="securityAreaWrap" class="content-section hidden">

            <div class="tool-card" style="text-align:center;">

                <i class="fas fa-user-shield" style="font-size:60px; color:var(--success); margin-bottom:20px;"></i>

                <h2>ÙØ­Øµ Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨</h2>

                <div id="scanStatus" style="color:#888; margin-bottom:20px;">Ø¬Ø§Ù‡Ø² Ù„Ù„ÙØ­Øµ...</div>

                <button class="sultan-btn" style="background:var(--success); color:black;" onclick="runSecurityScan()">Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø´Ø§Ù…Ù„</button>

                <div id="scanResult" style="margin-top:20px; text-align:right;"></div>

            </div>

        </div>

        <div id="docsAreaWrap" class="content-section hidden">

            <div class="tool-card" style="padding:15px; display:flex; gap:10px; flex-wrap:wrap;">

                <input type="text" id="docName" value="Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯" style="margin:0; width:200px;">

                <button class="sultan-btn" style="width:auto; padding:0 20px;" onclick="saveSultanDoc()">Ø­ÙØ¸ Ø³Ø­Ø§Ø¨ÙŠ <i class="fas fa-cloud-upload-alt"></i></button>

                <button class="sultan-btn" style="width:auto; padding:0 20px; background:white;" onclick="exportSultanPDF()">ØªØµØ¯ÙŠØ± PDF</button>

            </div>

            <div id="editor" style="height:500px; background:white; color:black; border-radius:0 0 20px 20px;"></div>

        </div>

        <div id="extraAreaWrap" class="content-section hidden">

            <div style="max-width:700px; margin:auto;">

                <div class="tool-card">

                    <button class="copy-btn" onclick="copyToClipboard('passDisp')">Ù†Ø³Ø® Ø§Ù„Ø±Ù…Ø²</button>

                    <h3>ğŸ”‘ Ù…ÙˆÙ„Ø¯ Ø±Ù…ÙˆØ² Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù‚ÙˆÙŠØ©</h3>

                    <div id="passDisp" style="background:#000; padding:25px; border-radius:15px; text-align:center; font-family:monospace; font-size:24px; color:var(--neon); border:1px dashed var(--primary); margin:20px 0;">XXXXXXXX</div>

                    <button class="sultan-btn" onclick="generateSultanPass()">ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯</button>

                </div>

                <div class="tool-card">

                    <h3>ğŸ“± Ù…ÙˆÙ„Ø¯ QR Code Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</h3>

                    <input type="text" id="qrText" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ù„Ù†Øµ">

                    <div id="qrPlace" style="background:white; padding:15px; border-radius:15px; display:inline-block; margin:20px 0;"></div>

                    <button class="sultan-btn" onclick="generateSultanQR()">ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ÙƒÙˆØ¯</button>

                </div>

            </div>

        </div>

        <div id="privateAreaWrap" class="content-section hidden">

            <div class="chat-container" id="chatBox"></div>

            <div style="display:flex; gap:10px; margin-top:20px;">

                <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù„Ù„Ø³Ù„Ø·Ø§Ù†..." style="margin:0;">

                <button class="sultan-btn" style="width:120px; margin:0;" onclick="sendSultanMessage()">Ø¥Ø±Ø³Ø§Ù„</button>

            </div>

        </div>

        <div id="adminAreaWrap" class="content-section hidden">

            <h2 style="color:var(--danger);">âš™ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¨Ø§Ø·Ø±Ø©</h2>

            <div class="grid">

                <div class="stat-card"><h3>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3><h2 id="totalUsers">0</h2></div>

                <div class="stat-card"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</h3><h2 id="totalPoints">0</h2></div>

                <div class="stat-card"><h3>Ø§Ù„Ø£ÙÙ„Ø§Ù…</h3><h2 id="totalMovies">0</h2></div>

            </div>

            <div class="tool-card" style="margin-top:30px;">

                <h3>Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…ÙŠ Ø¬Ø¯ÙŠØ¯</h3>

                <input type="text" id="mTitle" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">

                <input type="text" id="mThumb" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨ÙˆØ³ØªØ±">

                <input type="text" id="mVideo" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (Drive)">

                <input type="text" id="mFolder" placeholder="Ø§Ù„Ù…Ø¬Ù„Ø¯ (Ù…Ø«Ù„Ø§Ù‹: Ø£ÙÙ„Ø§Ù… 2026)">

                <button class="sultan-btn" style="background:var(--danger); color:white;" onclick="addAnimeToDB()">Ù†Ø´Ø± ÙÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</button>

            </div>

        </div>

    </div>

    <div id="videoOverlay" class="hidden" style="position:fixed; inset:0; background:black; z-index:5000; padding:20px;">

        <div style="max-width:1200px; margin:auto;">

            <button class="sultan-btn" style="width:auto; margin-bottom:20px;" onclick="closeSultanVideo()">â† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´ØºÙ„</button>

            <div style="position:relative; padding-bottom:56.25%; height:0; border:2px solid var(--primary); border-radius:25px; overflow:hidden; background:#111;">

                <iframe id="sultanPlayer" style="position:absolute; top:0; left:0; width:100%; height:100%;" src="" allowfullscreen></iframe>

            </div>

            <h2 id="sultanVideoTitle" style="color:var(--gold); margin-top:25px; font-size:28px;"></h2>

            <div id="videoMeta" style="color:#666;"></div>

        </div>

    </div>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";

        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        import { getFirestore, doc, getDoc, setDoc, collection, onSnapshot, query, where, orderBy, addDoc, limit, updateDoc, increment, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // Configs

        const firebaseConfig = { apiKey: "AIzaSyCRRykMJG9x2QjXL7zvr5bFHExaLgbvK8o", authDomain: "bot-trading-175e2.firebaseapp.com", projectId: "bot-trading-175e2", appId: "1:258267116344:web:096d5e348c75c9764207cd" };

        const otakuConfig = { apiKey: "AIzaSyDBJ_ABxdFTp1_MDMqoRYAev0_EAvbobvQ", projectId: "sultan-2aae3", appId: "1:28005518818:web:4a79ea71bb4c8adaa7fdbb" };

        const app = initializeApp(firebaseConfig);

        const otakuApp = initializeApp(otakuConfig, "otakuApp");

        const auth = getAuth(app);

        const db = getFirestore(app);

        const dbOtaku = getFirestore(otakuApp);

        const ADMINS = ["mostafa@admin.com", "mohamed@admin.com", "marco@admin.com", "ahmed@admin.com", "sultan@dev.com"];

        let isLogin = true;

        // --- Auth Logic ---

        window.toggleAuth = () => {

            isLogin = !isLogin;

            document.getElementById('register-fields').classList.toggle('hidden');

            document.getElementById('btnText').innerText = isLogin ? "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" : "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯";

            document.getElementById('toggle-text').innerText = isLogin ? "Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ùƒ" : "Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ";

        };

        window.handleAuth = async () => {

            const email = userEmail.value; const pass = userPass.value;

            try {

                if(isLogin) {

                    await signInWithEmailAndPassword(auth, email, pass);

                } else {

                    const res = await createUserWithEmailAndPassword(auth, email, pass);

                    await setDoc(doc(db, "users", res.user.uid), { 

                        name: regName.value, email: email, points: 100, createdAt: serverTimestamp(), role: "user" 

                    });

                }

            } catch(e) { alert("Ø­Ø¯Ø« Ø®Ø·Ø£: " + e.message); }

        };

        window.loginWithGoogle = async () => {

            try {

                const res = await signInWithPopup(auth, new GoogleAuthProvider());

                const uRef = doc(db, "users", res.user.uid);

                const snap = await getDoc(uRef);

                if(!snap.exists()) {

                    await setDoc(uRef, { name: res.user.displayName, email: res.user.email, points: 150, createdAt: serverTimestamp() });

                }

            } catch(e) { alert(e.message); }

        };

        window.onTelegramAuth = async (user) => {

            const uid = "tg_" + user.id;

            const uRef = doc(db, "users", uid);

            if(!(await getDoc(uRef)).exists()) {

                await setDoc(uRef, { name: user.first_name, points: 200, telegramId: user.id, createdAt: serverTimestamp() });

            }

            localStorage.setItem('sultan_tg', JSON.stringify(user));

            location.reload();

        };

        // --- Core Application Logic ---

        onAuthStateChanged(auth, async (user) => {

            const tg = localStorage.getItem('sultan_tg');

            if(user || tg) {

                const uid = user ? user.uid : "tg_" + JSON.parse(tg).id;

                const email = user ? user.email : "";

                

                document.getElementById('login-screen').classList.add('hidden');

                document.getElementById('mainApp').classList.remove('hidden');

                

                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

                onSnapshot(doc(db, "users", uid), (s) => {

                    const data = s.data();

                    if(data) {

                        userPoints.innerText = data.points || 0;

                        sultanName.innerText = "Ø§Ù„Ø³Ù„Ø·Ø§Ù†: " + data.name;

                        if(ADMINS.includes(data.email) || data.role === "admin") adminBtn.style.display = "flex";

                    }

                });

                loadSultanAnime();

                loadSultanChat(uid);

                loadLeaderboard();

            } else {

                document.getElementById('login-screen').classList.remove('hidden');

            }

        });

        // --- Anime System ---

        window.loadSultanAnime = () => {

            const col = collection(dbOtaku, "sultan_library");

            

            // Ø¬Ù„Ø¨ Ø§Ù„ØªØ±ÙŠÙ†Ø¯

            onSnapshot(query(col, orderBy("views", "desc"), limit(6)), (snap) => {

                const grid = document.getElementById('animeGrid'); grid.innerHTML = "";

                snap.forEach(d => grid.appendChild(createSultanCard(d.data(), d.id)));

            });

            // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª

            onSnapshot(col, (snap) => {

                const container = document.getElementById('allFolders'); container.innerHTML = "";

                const folders = {};

                snap.forEach(d => {

                    const data = d.data();

                    if(!folders[data.folder]) folders[data.folder] = [];

                    folders[data.folder].push({...data, id: d.id});

                });

                for(let f in folders) {

                    const sec = document.createElement('div');

                    sec.innerHTML = `<h3 style="margin:40px 0 20px; color:var(--neon); border-right:4px solid var(--neon); padding-right:15px;">ğŸ“‚ ${f}</h3><div class="grid"></div>`;

                    folders[f].forEach(item => sec.querySelector('.grid').appendChild(createSultanCard(item, item.id)));

                    container.appendChild(sec);

                }

            });

        };

        window.createSultanCard = (data, id) => {

            const div = document.createElement('div'); div.className = 'anime-card';

            div.innerHTML = `

                <div class="badge-views">ğŸ‘ï¸ ${data.views || 0}</div>

                <img src="${data.thumb}" onerror="this.src='https://via.placeholder.com/300x450?text=Sultan+Dev'">

                <div class="info">${data.title}</div>

            `;

            div.onclick = () => {

                sultanVideoTitle.innerText = data.title;

                let url = data.video; if(url.includes('drive.google.com')) url = url.replace('/view', '/preview');

                sultanPlayer.src = url;

                videoOverlay.classList.remove('hidden');

                updateDoc(doc(dbOtaku, "sultan_library", id), { views: increment(1) });

            };

            return div;

        };

        // --- Ranking & Leaderboard ---

        window.loadLeaderboard = () => {

            onSnapshot(query(collection(db, "users"), orderBy("points", "desc"), limit(10)), (snap) => {

                const list = document.getElementById('leaderboardList'); list.innerHTML = "";

                let i = 1;

                snap.forEach(doc => {

                    const d = doc.data();

                    list.innerHTML += `

                        <div class="leader-item">

                            <div class="leader-rank">${i++}</div>

                            <div style="flex:1;"><strong>${d.name}</strong></div>

                            <div style="color:var(--primary); font-weight:bold;">ğŸª™ ${d.points}</div>

                        </div>

                    `;

                });

            });

        };

        // --- Tools Logic ---

        window.generateSultanPass = () => {

            const charset = "ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%^&*";

            let retVal = "";

            for (let i = 0; i < 14; ++i) retVal += charset.charAt(Math.floor(Math.random() * charset.length));

            document.getElementById('passDisp').innerText = retVal;

        };

        window.generateSultanQR = () => {

            const text = document.getElementById('qrText').value;

            const place = document.getElementById('qrPlace');

            place.innerHTML = "";

            if(text) new QRCode(place, { text: text, width: 160, height: 160 });

        };

        window.copyToClipboard = (id) => {

            const text = document.getElementById(id).innerText;

            if(text.includes('X')) return;

            navigator.clipboard.writeText(text);

            alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ Ø³Ù„Ø·Ø§Ù†! ğŸ‘‘");

        };

        // --- Security Scan (Simulated) ---

        window.runSecurityScan = () => {

            const status = document.getElementById('scanStatus');

            const res = document.getElementById('scanResult');

            status.innerText = "Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø«ØºØ±Ø§Øª...";

            res.innerHTML = "";

            setTimeout(() => {

                status.innerText = "ÙØ­Øµ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù†Ø´Ø· âœ…";

                res.innerHTML = `

                    <p style="color:var(--success);">âœ… Ø¬Ø¯Ø§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ©: Ù…Ø³ØªÙ‚Ø±</p>

                    <p style="color:var(--success);">âœ… ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: 256-bit AES</p>

                    <p style="color:var(--primary);">ğŸ›¡ï¸ ØªÙˆØµÙŠØ©: Ù‚Ù… Ø¨ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ†.</p>

                `;

            }, 2000);

        };

        // --- Ideas & Creator Lab ---

        window.sendIdea = async () => {

            const idea = ideaInput.value; if(!idea) return;

            const uid = auth.currentUser?.uid;

            await addDoc(collection(db, "suggestions"), { idea: idea, from: uid, time: serverTimestamp() });

            ideaInput.value = "";

            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ÙÙƒØ±ØªÙƒ Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø³Ù„Ø·Ø§Ù†! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡Ø§ Ù‚Ø±ÙŠØ¨Ø§Ù‹.");

        };

        // --- Admin Actions ---

        window.addAnimeToDB = async () => {

            await addDoc(collection(dbOtaku, "sultan_library"), {

                title: mTitle.value, thumb: mThumb.value, video: mVideo.value, folder: mFolder.value, views: 0

            });

            alert("ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!");

            mTitle.value = ""; mThumb.value = ""; mVideo.value = ""; mFolder.value = "";

        };

        // --- Chat System ---

        window.sendSultanMessage = async () => {

            const val = chatInput.value; if(!val) return;

            const tg = localStorage.getItem('sultan_tg');

            const uid = auth.currentUser ? auth.currentUser.uid : "tg_" + JSON.parse(tg).id;

            await addDoc(collection(db, `chats/${uid}/messages`), { text: val, sender: uid, time: serverTimestamp() });

            chatInput.value = "";

        };

        window.loadSultanChat = (uid) => {

            onSnapshot(query(collection(db, `chats/${uid}/messages`), orderBy("time", "asc")), (snap) => {

                const box = document.getElementById('chatBox'); box.innerHTML = "";

                snap.forEach(m => {

                    const d = m.data();

                    box.innerHTML += `<div class="msg ${d.sender === uid ? 'me' : 'them'}">${d.text}</div>`;

                });

                box.scrollTop = box.scrollHeight;

            });

        };

        // --- UI Control ---

        window.switchTab = (tab) => {

            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));

            document.getElementById(tab + 'AreaWrap').classList.remove('hidden');

            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

            event?.currentTarget?.classList.add('active');

            toggleSidebar();

        };

        window.toggleSidebar = () => sidebar.classList.toggle('active');

        window.closeSultanVideo = () => { videoOverlay.classList.add('hidden'); sultanPlayer.src = ""; };

        window.logout = () => { signOut(auth); localStorage.clear(); location.reload(); };

        

        const quill = new Quill('#editor', { theme: 'snow' });

    </script>

</body>

</html>
    
  </body>
  
</html>
